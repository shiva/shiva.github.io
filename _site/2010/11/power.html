<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Shiva - Power of 2</title>
  <meta name="author" content="Shiva" />
  <meta name="description" content="The blog of Shiva" />
  <link rel="canonical" href="/2010/11/power" />

  <link href="//fonts.googleapis.com/css?family=Open+Sans:600,800" rel="stylesheet" type="text/css">
  <link rel="shortcut icon" href="/favicon.png">
  <link rel="alternate" type="application/rss+xml" title="" href="/atom.xml" />

  <link rel="stylesheet" href="/assets/css/all.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/picturefill/3.0.1/picturefill.min.js" defer></script>
</head>
<body>
  <div class="container">
    <div class="four columns sidebar">
      <nav>
  <h1>Hi.</h1>
  <a href="/">
    <img src="/logo.png" id="logo" alt="Blog logo"/>
  </a>
  <h2>I'm <a href="/">Shiva</a>.</h2>
  
  
  <hr/>
  <div id="social">
    Follow me:
<div id="stalker">
  
  <a title="shiva on Github" href="https://github.com/shiva">
    <i class="fa fa-github-square"></i>
  </a>
  

  
  <a title="shiva on Bitbucket" href="https://bitbucket.com/shiva/">
    <i class="fa fa-bitbucket-square"></i>
  </a>
  

  

  
  <a title="Shiva on Goodreads" href="https://www.goodreads.com/shiv">
     <span class="fa-stack">
        <i class="fa fa-stack-1x fa-square"></i>
        <i class="fa fa-stack-1x fa-hn">G</i>
      </span>
  </a>
  



  

  

  
  <a title="shiva on Twitter" href="https://twitter.com/shiva">
    <i class="fa fa-twitter-square"></i>
  </a>
  

  
  <a title="Shiva on Facebook" href="https://facebook.com/shivanand">
    <i class="fa fa-facebook-square"></i>
  </a>
  

  
  <a title="Shiva on tumblr" href="https://shiva.tumblr.com">
    <i class="fa fa-tumblr-square"></i>
  </a>
  

  
  <a title="Shiva on LinkedIn" href="https://www.linkedin.com/in/vshivanand">
    <i class="fa fa-linkedin-square"></i>
  </a>
  

  

  
  <a title="Shiva on Flickr" href="https://flickr.com/shvelmur">
    <i class="fa fa-flickr"></i>
  </a>
  

  
  <a title="Shiva on 500px" href="https://500px.com/shiv">
    <i class="fa fa-500px"></i>
  </a>
  

  <a title="RSS feed" id="rss" href="/atom.xml">
    <i class="fa fa-rss-square"></i>
  </a>
</div>

  </div>
</nav>

    </div>

    <div class="eleven columns content">
      <p class="meta">
  November 03, 2010 
  <a href="/">
    <i class="home fa fa-home"></i>
  </a>
</p>

<h1 class="title">Power of 2</h1>

<div id="post">
  <p>It's been a while since I've done anything except write code -- lots of it. The last 20 days have been insane, and ofcourse to a take a break from writing code, I like to read code that others write. (You DO know that I'm crazy, right?!). In one of my futile attempts at clearing my google-reader reading list, I chanced upon a post by <a href="http://veechand.wordpress.com/about/">Veerabahu</a>, on finding if a number is a power of 2 (or not).</p>
<p>As he writes, there is the simpleton O(n) solution (<a href="http://veechand.wordpress.com/2009/12/19/is-a-number-power-of-two/">you will have to click-through for that</a>), and the most elegant (yet) bitwise solution:</p>
<pre class="c">
/*
 */
bool
is_power_of_2(int n) {
   return ((n &amp; -n) == n);
}</pre>
<p>The bitwise way to calculate the power of 2 is probably the most efficient in c like languages. Ofcourse for that, your language of choice needs to support it and should be more efficient that common math functions. The other way is to use some simple math.</p>
<p>Let's say N, is the value, and you need to check if it is a power of two. Compute n = log N / log 2. If floor(n) == n, then N was a power of 2.</p>
<pre class="c">
/*
 */
bool
is_power_of_2_pure_math_baby(int n) {
    /* address -ve numbers */
    if (n &lt; 0)
        n = -n;

    double i = log(n)/log(2);      /* i = power of 2 */
    return (lower(i) == i);        /* check if perfect power of 2 */
}</pre>
<p>This is obviously, a less efficient way of checking if a number is a power of 2, than using the bitwise method. However, it has a few advantages:</p>
<ol>
<li>It works exactly the same way for all values of n.</li>
<li>It works exactly the same way for all integers (ie, n can be int8/16/32/64, long, signed or unsigned, and the same logic would work</li>
<li>It is O(1) like the bitwise solution</li>
<li>It is less cryptic (ie just basic understanding of math is reqd for grokking this solution)</li>
<li>Finally, it can be extended in future to calculate if n is a power of *any value*, not just 2</li>
</ol>
<p>Of course, t<a href="http://www.artima.com/wbc/interprogP.html">he point Josh Bloch was making </a>in interviewing engineers, was that he is interested in knowing the <strong>WHY</strong> of a solution. It does not matter if the algorithm is marginally less optimal or different. If you are an interviewer in your organisation, and you catch yourself asking a question like this, remember that if an engineer can reduce O(n) to O(1), stop with similar micro-skills test. Find out why she coded it the way she did. It will tell you a lot more about her skills than some algorithms/tricks that can be picked up in a<a href="http://www.amazon.com/gp/product/047012167X?ie=UTF8&amp;tag=shivanand-20&amp;linkCode=as2&amp;camp=1789&amp;creative=390957&amp;creativeASIN=047012167X"> couple a days</a>, if not <a href="http://wiki.allegro.cc/index.php?title=Bitwise_operator#Power_of_two_check">overnight</a>.</p>

</div>

<div id="related">
  <h3>Related Posts</h3>
  <ul class="posts">
    
    <li>
      <span>30 Sep 2014 &raquo;</span> <a href="/2014/09/thoughts-on-ello">Thoughts on ello</a>
    </li>
    
    <li>
      <span>15 Jul 2014 &raquo;</span> <a href="/2014/07/my-eiffel-tower">My Eiffel Tower</a>
    </li>
    
    <li>
      <span>14 Jul 2014 &raquo;</span> <a href="/2014/07/rid-of-passwords">Getting rid of passwords</a>
    </li>
    
  </ul>
</div>


      <div class="footer">
        <div class="disclaimer">
  
  <p>
    The postings on this site are my own and don't necessarily represent my 
    employer’s positions, strategies or opinions.
  </p>
  

  <p>
  © Shiva, 2016 &mdash; built with Jekyll using Lagom theme
  </p>
</div>

      </div>
    </div>
  </div>


</body>
</html>
